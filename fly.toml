app = "multi-ai-chatbot"
primary_region = "ams"

[build]
  dockerfile = "docker/Dockerfile.cpu"

[env]
  PORT = "8080"  # or "8001" if you prefer

[[services]]
  internal_port = 8080   # must match the PORT your container listens on
  protocol      = "tcp"

  [[services.ports]]
    port     = 80
    handlers = ["http"]

  [[services.http_checks]]
    path         = "/health"
    interval     = "10s"
    timeout      = "3s"
    grace_period = "60s"  # give uvicorn time to boot & imports to lazy‚Äêload

  [[services.tcp_checks]]
    interval     = "10s"
    timeout      = "3s"
    grace_period = "60s"
